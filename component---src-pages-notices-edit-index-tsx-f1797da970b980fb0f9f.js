"use strict";(self.webpackChunk_callabt_front_manager=self.webpackChunk_callabt_front_manager||[]).push([[368],{7427:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});var l=n(2155),a=n(20),r=n(354),c=n(5407),i=n(4072),o=n(7789),s=n(9130),m=n(2940),d=n(5820),u=n(4488),f=n(5633),E=n(5616),h=n(5723),g=(0,E.A)((0,h.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),p=n(6215),y=n(6324);var A=e=>{let{title:t,onChangeTitle:n,contents:E,onChangeContents:h,onClickEdit:A,fileInfos:C,fileInputRef:k,onClickAddFiles:v,onClickDeleteFile:w,onClickDelete:B,isLoading:x}=e;return l.createElement("div",{style:{padding:"20px"}},l.createElement(a.A,{variant:"h4",style:{marginBottom:"20px"}},"공지사항"),l.createElement(r.A,{label:"제목",fullWidth:!0,variant:"outlined",margin:"normal",value:t,onChange:e=>n(e.target.value)}),l.createElement("div",{style:{marginBottom:"20px"}},l.createElement(p.A,{value:E,onChange:h,placeholder:"내용을 입력해주세요."})),l.createElement("div",{style:{marginBottom:"60px",display:"flex",justifyContent:"space-between"}},l.createElement(c.A,{variant:"contained",color:"primary",onClick:A},"수정하기"),l.createElement(c.A,{variant:"contained",color:"secondary",onClick:B},"공지사항 삭제하기")),l.createElement(a.A,{variant:"h5",style:{marginBottom:"20px"}},"첨부 파일"),l.createElement(i.A,{component:o.A},l.createElement(s.A,null,l.createElement(m.A,null,l.createElement(d.A,null,l.createElement(u.A,null),l.createElement(u.A,{align:"center"},"이름"),l.createElement(u.A,{align:"center"},"위치"),l.createElement(u.A,{align:"center"}))),l.createElement(f.A,null,C.map((e,t)=>l.createElement(d.A,{key:t,hover:!0},l.createElement(u.A,{component:"th",scope:"row"},t+1),l.createElement(u.A,{align:"center"},e.name),l.createElement(u.A,{align:"center"},e.location),l.createElement(u.A,{align:"center"},l.createElement(c.A,{variant:"contained",color:"secondary",onClick:()=>w(e.id)},l.createElement(g,{style:{fontSize:"17px"}})))))))),l.createElement("input",{type:"file",multiple:!0,style:{marginBottom:"20px",marginTop:"20px",display:"block"},ref:k}),l.createElement(c.A,{variant:"contained",color:"primary",onClick:v,style:{}},"추가하기"),l.createElement(y.A,{isShown:x}))},C=n(4670),k=n(3173),v=n(633),w=n(6344);var B=e=>{let{location:t}=e;const n=new URLSearchParams(t.search).get("id"),a=Number(n),{0:r,1:c}=(0,l.useState)(""),{0:i,1:o}=(0,l.useState)(""),{0:s,1:m}=(0,l.useState)([]),{0:d,1:u}=(0,l.useState)(!0),f=(0,l.useRef)(null),E=async()=>{u(!0);try{const{data:e}=await k.mB.$4.getNoticeById({id:a});e?(c(e.title),o(e.contents),m(e.files)):alert("해당 공지사항을 찾을 수 없습니다.")}catch(e){console.error(e),alert("공지사항을 불러오는 데 실패했습니다.")}u(!1)};return(0,l.useEffect)(()=>{E()},[]),l.createElement(v.A,null,l.createElement(A,{title:r,onChangeTitle:c,contents:i,onChangeContents:o,onClickEdit:async()=>{if(u(!0),confirm("수정하시겠습니까?"))try{await k.mB.hO.editNotice({id:a,title:r,contents:i}),alert("수정 됐습니다.")}catch(e){console.error(e),alert("수정에 실패했습니다.")}u(!1)},fileInfos:s,fileInputRef:f,onClickAddFiles:async()=>{const e=[];if(f.current&&f.current.files)for(let n=0;n<f.current.files.length;n+=1)e.push(f.current.files[n]);if(e.length>0){u(!0);try{await k.mB.bQ.addNoticeFiles({id:a,files:e}),alert("첨부 파일이 추가 됐습니다."),E()}catch(t){console.error(t),alert("첨부 파일 추가에 실패했습니다.")}u(!1)}else alert("선택된 파일이 없습니다.")},onClickDeleteFile:async e=>{if(u(!0),confirm("삭제하시겠습니까?"))try{await k.mB.u4.deleteNoticeFile({id:e}),alert("삭제 됐습니다."),m(s.filter(t=>t.id!==e))}catch(t){console.error(t),alert("삭제에 실패했습니다.")}u(!1)},onClickDelete:async()=>{if(u(!0),confirm("삭제하시겠습니까?"))try{await k.mB.ge.deleteNotice({id:a}),alert("삭제 됐습니다."),(0,w.oo)((0,C.CQ)())}catch(e){console.error(e),alert("삭제에 실패했습니다.")}u(!1)},isLoading:d}))}}}]);
//# sourceMappingURL=component---src-pages-notices-edit-index-tsx-f1797da970b980fb0f9f.js.map